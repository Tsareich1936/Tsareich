add_namespace = TR_iraklion

#1 GRE Rise of socialism
country_event = {
	id = TR_iraklion.1
	title = TR_iraklion.1.t
	desc = TR_iraklion.1.d

	trigger = {
		tag = GRE
		socialism > 0.05
	}
	trigger = {
		SRI = {
			has_completed_focus = SRI_red_greece
		}
	}
	fire_only_once = yes
	timeout_days = 7

	mean_time_to_happen = {
		days = 1
	}

	option = {# That's great!
		name = TR_iraklion.1.a
		add_popularity = {
			ideology = socialism
			popularity = 0.15
		}
		hidden_effect = {
			GRE = {
				country_event = {
					id = TR_iraklion.2
					days = 35
				}
			}
		}
	}
}
#2 GRE coup of socialist!
country_event = {
	id = TR_iraklion.2
	title = TR_iraklion.2.t
	desc = TR_iraklion.2.d

	is_triggered_only = yes #triggered by ev1
	timeout_days = 7
	
	immediate = {
		GRE = {
			every_owned_state = {
				limit = {
					is_core_of = GRE
				}
				add_core_of = GRS
			}
		}
		GRS = {
			transfer_state = 185
			country_event = TR_iraklion.5
			add_threat = 0.15
		}
	}
	option = {#Seek assistance from Russia.
		name = TR_iraklion.2.a
		trigger = {
			tag = GRE
		}
		RUS = {
			country_event = {
				id = TR_iraklion.3
				hours = 4
			}
		}
	}
	option = {#Socialism is good.
		name = TR_iraklion.2.a
		trigger = {
			is_ai = no
		}
		GRS = {
			change_tag_from = GRE
		}
		hidden_effect = {
			RUS = {
				country_event = {
					id = TR_iraklion.3
					hours = 4
				}
			}
		}
	}
}
#3 RUS Request for assistance from Greece
country_event = { 
	id = TR_iraklion.3
	title = TR_iraklion.3.t
	desc = TR_iraklion.3.d

	is_triggered_only = yes

	option = {#Socialism spread must not be allowed 
		name = TR_iraklion.3.a
		ai_chance = {
			base = 0
		}
		trigger = {
			is_ai = no
		}
		RUS = {
			give_guarantee = GRE
		}
		GRE = {
			country_event = {
				id = TR_iraklion.4
				hours = 1
			}
		}
		GRS = {
			country_event = {
				id = TR_iraklion.4
				hours = 1
			}
		}
	}
	option = {#War must be avoided
		name = TR_iraklion.3.b
		ai_chance = {
			base = 100
		}
		GRE = {
			country_event = {
				id = TR_iraklion.8
				days = 1
			}
		}
		GRS = {
			country_event = {
				id = TR_iraklion.8
				days = 1
			}
		}
		every_country = {
			limit = {
				OR = {
					tag = GRE
					tag = GRS
					tag = SRI
					tag = RUS
					tag = ENG
				}
			}
			THIS = {
				country_event = {#hold Iraklion
					id = TR_iraklion.9
					days = 4
				}
			}
		}
		# hidden_effect = {
		# 	every_country = {
		# 		limit = {
		# 			OR = {
		# 				tag = GRE
		# 				tag = GRS
		# 				tag = SRI
		# 				tag = RUS
		# 				tag = ENG
		# 			}
		# 		}
		# 		country_event = {#hold Iraklion
		# 			id = TR_iraklion.9
		# 			hours = 24
		# 		}
		# 	}
		# }
	}
}
#4 GRE-GRS Russian intervention in Greece!
country_event = {
	id = TR_iraklion.4
	title = TR_iraklion.4.t
	desc = TR_iraklionTR_.4.d

	is_triggered_only = yes

	option = {# Great!
		trigger = {
			tag = GRE
		}
		name = TR_iraklion.4.a
	}
	option = {# Come and get it! I'll be your opponent!
		trigger = {
			tag = GRS
		}
		name = TR_iraklion.4.b
		declare_war_on = {
			target = GRE
			type = annex_everything
		}
		add_threat = 0.15
	}
}
#5 GRS Request for assistment to ITA
country_event = {
	id = TR_iraklion.5
	title = TR_iraklion.5.t
	desc = TR_iraklion.5.d

	is_triggered_only = yes

	option = {#Send them a request for assistance
		name = TR_iraklion.5.a
		SRI = {
			country_event = {
				id = TR_iraklion.6
				hours = 4
			}
		}
	}
}
#6 SRI Request for assistance from Greece
country_event = {
	id = TR_iraklion.6
	title = TR_iraklion.6.t
	desc = TR_iraklion.6.d

	is_triggered_only = yes

	option = {#We should help our comrades
		name = TR_iraklion.6.a
		GRS = {
			country_event = {
				id = TR_iraklion.7
				hours = 16
			}
		}
	}
}
#7 GRS Italy help us
country_event = {
	id = TR_iraklion.7
	title = TR_iraklion.7.t
	desc = TR_iraklion.7.d

	is_triggered_only = yes
	option = {# Great!
		name = TR_iraklion.7.a
		trigger = {
			tag = GRS
		}
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 20000
		}
		add_equipment_to_stockpile = {
			type = support_equipment
			amount = 10000
		}
		add_equipment_to_stockpile = {
			type = artillery_equipment
			amount = 5000
		}
		add_ideas = {
			revolutional_economic
			extensive_conscription
		}
		army_experience = 100
		add_manpower = 500000
		add_offsite_building = {
			type = arms_factory
			level = 5
		}
	}
}
#8 Russia announces mediation
country_event = {
	id = TR_iraklion.8
	title = TR_iraklion.8.t
	desc = TR_iraklion.8.d

	is_triggered_only = yes

	option = {#Let's just accept it for the moment
		name = TR_iraklion.8.a
	}
}
#9 Gonna hold Iraklion Conference
country_event = {
	id = TR_iraklion.9
	title = TR_iraklion.9.t
	desc = TR_iraklion.9.d

	is_triggered_only = yes

	option = {#Wait for a time!
		name = TR_iraklion.9.a
		trigger = {
			OR = {
				tag = GRE
				tag = GRS
			}
		}
	}
	option = {#Let's keep it civil
		name = TR_iraklion.9.b
		trigger = {
			tag = RUS
		}
	}
	option = {#Socialism will win
		name = TR_iraklion.9.c
		trigger = {
			tag = SRI
		}
	}
	option = {#Should intervene!
		name = TR_iraklion.9.e
		trigger = {
			tag = ENG
		}
		ai_chance = {
			base = 100
		}
		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						tag = GRE
						tag = GRS
						tag = SRI
						tag = RUS
						tag = ENG
					}
				}
				add_to_array = {
					array = iraklion_members
				}
				country_event = {
					id = TR_iraklion.10
					days = 1
				}
			}
		}
	}
	# option = {#Shouldn't get involved.
	# 	name = TR_iraklion.9.f
	# 	trigger = {
	# 		tag = ENG
	# 	}
	# 	ai_chance = {
	# 		base = 0
	# 	}
	# 	hidden_effect = {
	# 		every_country = {
	# 			limit = {
	# 				OR = {
	# 					tag = GRE
	# 					tag = GRS
	# 					tag = SRI
	# 					tag = RUS
	# 				}
	# 			}
	# 			add_to_array = {
	# 				array = iraklion_members
	# 			}
	# 		}
	# 	}
	# }
}
#10 Britain Intervene
country_event = {
	id = TR_iraklion.10
	title = TR_iraklion.10.t
	desc = TR_iraklion.10.d

	is_triggered_only = yes
	timeout_days = 7
	immediate = {
		for_each_loop = {
			array = iraklion_members
			country_event = {
				id = TR_iraklion.11
				days = 1
			}
		}
		every_country = {
			limit = {
				always = no
			}
			country_event = {
				id = TR_iraklion.11
				days = 1
			}
		}
	}
	option = {#For the time being, there will be no war.
		name = TR_iraklion.10.a
		effect_tooltip = {
			for_each_loop = {
				array = iraklion_members
				country_event = {
					id = TR_iraklion.11
					days = 1
				}
			}
		}
	}
}
#11 Iraklion Conference Start
country_event = {
	id = TR_iraklion.11
	title = TR_iraklion.11.t
	desc = TR_iraklion.11.d

	is_triggered_only = yes
	timeout_days = 7
	option = {#GRE Let us start 
		name = TR_iraklion.11.a
		trigger = {
			tag = GRE
		}
		set_country_flag = TR_GRE_iraklion_started_flag
		set_global_flag = TR_iraklion_started_flag
		custom_effect_tooltip = "TR_unlocked_iraklion_decisions_tt"
		activate_mission = TR_IC_mission
	}
	option = {#GRS we weill win
		name = TR_iraklion.11.b
		trigger = {
			tag = GRS
		}
	}
	option = {#RUS kill socialist!
		name = TR_iraklion.11.c
		trigger = {
			tag = RUS
		}
	}
	option = {#SRI go socialism
		name = TR_iraklion.11.e
		trigger = {
			tag = SRI
		}
	}
	option = {#ENG make greece peace
		name = TR_iraklion.11.f
		trigger = {
			tag = ENG
		}
	}

}
#12 Socialist issue - start
country_event = {
	id = TR_iraklion.12
	title = TR_iraklion.12.t
	desc = TR_iraklion.12.d

	is_triggered_only = yes
	timeout_days = 7

	option = {# belive good result
		name = TR_iraklion.12.a
		for_each_loop = {
			array = iraklion_members
			country_event = {
				id = TR_iraklion.13
			}
		}
		hidden_effect = {
			every_country = {
				limit = {
					always = no
				}
				country_event = {
					id = TR_iraklion.13
				}
			}
		}
	}
}
#13 Socialist issue - vote
country_event = {
	id = TR_iraklion.13
	title = TR_iraklion.13.t
	desc = TR_iraklion.13.d

	is_triggered_only = yes
	timeout_days = 7

	immediate = {
		GRE = {
			country_event = {
				id = TR_iraklion.14
				days = 1
			}
		}
	}

	option = {#indipendence
		name = TR_iraklion.13.a
		add_to_variable = {
			value = 1
			var = TR_IC_acceptance
		}
	}
}
#14 Socialist issue - collect
country_event = {
	id = TR_iraklion.14
	title = TR_iraklion.14.t
	desc = TR_iraklion.14.d

	is_triggered_only = yes
	timeout_days = 7

	hidden = yes
	immediate = {
		if = {
			limit = {
				check_variable = {
					var = TR_IC_acceptance
					value = 5
				}
			}
			set_country_flag = TR_IC_soc_win
		}
		for_each_loop = {
			array = iraklion_members
			country_event = {
				id = TR_iraklion.15
			}
		}
		every_country = {
			limit = {
				always = no
			}
			country_event = TR_iraklion.15
		}
	}
}
#15 Socialist issue - result
country_event = {
	id = TR_iraklion.15
	title = TR_iraklion.15.t
	desc = TR_iraklion.15.d

	is_triggered_only = yes
	timeout_days = 7
	immediate = {
		GRE = {
			clr_country_flag = TR_IC_progressing 
			set_global_flag = finished_soc
		}
	}
	option = {
		name = TR_iraklion.15.a
	}
}
#16 Security issue - start
country_event = {
	id = TR_iraklion.16
	title = TR_iraklion.16.t
	desc = TR_iraklion.16.d

	is_triggered_only = yes
	timeout_days = 7

	option = {# belive good result
		name = TR_iraklion.16.a
		for_each_loop = {
			array = iraklion_members
			country_event = {
				id = TR_iraklion.17
			}
		}
		hidden_effect = {
			every_country = {
				limit = {
					always = no
				}
				country_event = {
					id = TR_iraklion.17
				}
			}
		}
	}
}
#17 security issue - vote
country_event = {
	id = TR_iraklion.17
	title = TR_iraklion.17.t
	desc = TR_iraklion.17.d

	is_triggered_only = yes
	timeout_days = 7

	immediate = {
		GRE = {
			country_event = {
				id = TR_iraklion.18
				days = 1
			}
		}
	}

	option = {#indipendence
		name = TR_iraklion.17.a
		add_to_variable = {
			value = 1
			var = TR_IC_acceptance
		}
	}
}
#18 security issue - collect
country_event = {
	id = TR_iraklion.18
	title = TR_iraklion.18.t
	desc = TR_iraklion.18.d

	is_triggered_only = yes
	timeout_days = 7

	hidden = yes
	immediate = {
		if = {
			limit = {
				check_variable = {
					var = TR_IC_acceptance
					value = 5
				}
			}
			set_country_flag = TR_IC_sec_win
		}
		for_each_loop = {
			array = iraklion_members
			country_event = {
				id = TR_iraklion.19
			}
		}
		every_country = {
			limit = {
				always = no
			}
			country_event = TR_iraklion.19
		}
	}
}
#19 Security issue - result
country_event = {
	id = TR_iraklion.19
	title = TR_iraklion.19.t
	desc = TR_iraklion.19.d

	is_triggered_only = yes
	timeout_days = 7
	immediate = {
		GRE = {
			clr_country_flag = TR_IC_progressing 
			set_global_flag = finished_sec
		}
	}
	option = {
		name = TR_iraklion.19.a
	}
}
#20 Turkey issue - start
country_event = {
	id = TR_iraklion.20
	title = TR_iraklion.20.t
	desc = TR_iraklion.20.d

	is_triggered_only = yes
	timeout_days = 7

	option = {# belive good result
		name = TR_iraklion.20.a
		for_each_loop = {
			array = iraklion_members
			country_event = {
				id = TR_iraklion.21
			}
		}
		hidden_effect = {
			every_country = {
				limit = {
					always = no
				}
				country_event = {
					id = TR_iraklion.21
				}
			}
		}
	}
}
#21 Turkey issue - vote
country_event = {
	id = TR_iraklion.21
	title = TR_iraklion.21.t
	desc = TR_iraklion.21.d

	is_triggered_only = yes
	timeout_days = 7

	immediate = {
		GRE = {
			country_event = {
				id = TR_iraklion.22
				days = 1
			}
		}
	}

	option = {#indipendence
		name = TR_iraklion.21.a
		add_to_variable = {
			value = 1
			var = TR_IC_acceptance
		}
	}
}
#22 Turkey issue - collect
country_event = {
	id = TR_iraklion.22
	title = TR_iraklion.12.t
	desc = TR_iraklion.22.d

	is_triggered_only = yes
	timeout_days = 7

	hidden = yes
	immediate = {
		if = {
			limit = {
				check_variable = {
					var = TR_IC_acceptance
					value = 5
				}
			}
			set_country_flag = TR_IC_tur_win
		}
		for_each_loop = {
			array = iraklion_members
			country_event = {
				id = TR_iraklion.23
			}
		}
		every_country = {
			limit = {
				always = no
			}
			country_event = TR_iraklion.23
		}
	}
}
#23 Turkey issue - result
country_event = {
	id = TR_iraklion.23
	title = TR_iraklion.23.t
	desc = TR_iraklion.23.d

	is_triggered_only = yes
	timeout_days = 7
	immediate = {
		GRE = {
			clr_country_flag = TR_IC_progressing 
			set_global_flag = finished_tur
		}
	}
	option = {
		name = TR_iraklion.23.a
	}
}
#24 Iraklion Conference Finished
country_event = {
	id = TR_iraklion.24
	title = TR_iraklion.24.t
	desc = TR_iraklion.24.d

	is_triggered_only = yes
	timeout_days = 7
	immediate = {
		if = {
			limit = {
				NOT = {
					has_global_flag = TR_IC_completed
				}
			}
			set_global_flag = TR_IC_completed
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_global_flag = TR_IC_GRS
					}
				}
				set_global_flag = TR_IC_GRS
			
				GRS = {
					add_offsite_building = {
						type = industrial_complex
						level = 10
					}
					add_offsite_building = {
						type = arms_factory
						level = 10
					}
				}
			}
		}
	}
	option = {
		name = TR_iraklion.24.a
	}
}
#25 unsettled mood
country_event = {
	id = TR_iraklion.25
	title = TR_iraklion.25.t
	desc = TR_iraklion.25.d

	is_triggered_only = yes
	fire_only_once = yes
	timeout_days = 7
	fire_for_sender = yes
	major = yes

	option = {
		name = TR_iraklion.25.a
	}
}
#26 Meetings dance, but do not proceed
country_event = {
	id = TR_iraklion.26
	title = TR_iraklion.26.t
	desc = TR_iraklion.26.d

	is_triggered_only = yes
	timeout_days = 7
	immediate = {
		for_each_loop = {
			array = iraklion_members
			country_event = {
				id = TR_iraklion.29
				days = 3
			}
		}
	}
	option = {
		name = TR_iraklion.26.a
	}
}
#27 The price of reconciliation
country_event = {
	id = TR_iraklion.27
	title = TR_iraklion.27.t
	desc = TR_iraklion.27.d

	is_triggered_only = yes
	fire_only_once = yes
	timeout_days = 7
	fire_for_sender = yes
	major = yes

	option = {
		name = TR_iraklion.27.a
	}
}
#28 restarting conflicts
country_event = {
	id = TR_iraklion.28
	title = TR_iraklion.28.t
	desc = TR_iraklion.28.d

	is_triggered_only = yes
	fire_only_once = yes
	timeout_days = 7
	fire_for_sender = yes
	major = yes

	option = {
		name = TR_iraklion.28.a
	}
}
#29 inevitable fate
country_event = {
	id = TR_iraklion.29
	title = TR_iraklion.29.t
	desc = TR_iraklion.29.d

	is_triggered_only = yes
	fire_only_once = yes
	timeout_days = 7
	fire_for_sender = yes
	major = yes

	option = {# Great!
		trigger = {
			NOT = {
				tag = RUS
			}
		}
		name = TR_iraklion.4.a
	}
	option = {# Come and get it! I'll be your opponent!
		trigger = {
			tag = GRS
		}
		name = TR_iraklion.4.b
		declare_war_on = {
			target = GRE
			type = annex_everything
		}
		add_threat = 0.15
	}
}